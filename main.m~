% INITIALIZATION
addpath(genpath('libraries'),genpath('pcdata'));

%ptCloud = pcread('bun_zipper.ply');
% dataFile = fullfile(toolboxdir('vision'), 'visiondata', 'livingRoom.mat');
% load(dataFile);
% ptCloud = livingRoomData{44};

ptCloud = pcread('body-v2.ply');
gridStep = 20;
ptCloud = pcdownsample(ptCloud, 'gridAverage', gridStep);
pcshow(ptCloud);
%% PART 1 : GRAPH CONSTRUCTION:
%threshold = 1;
%disp('adding nodes to graph');
%G = graph_addnodes(ptCloud);
disp('adding edges to graph');
num_neighbors = 5;
sigma_sq = 10;
G = graph_addedges(ptCloud,num_neighbors,sigma_sq);
Graph_pc = graph_addnodeattributes(G,ptCloud);
%% PART 2 : GRAPH RESAMPLING:
Graph_pc_imp = graph_calcimp(Graph_pc, ptCloud);
sampling_density = 0.20;
sample_index = randsample(ptCloud.Count, round(sampling_density * ptCloud.Count), true, Graph_pc_imp.Nodes.Imp);
%construct new point cloud from sample_index:












%% PART 3 : SEGMENTATION









%% PART 3 : SEGMENTATION:

